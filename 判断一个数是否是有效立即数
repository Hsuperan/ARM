
/******************************************************
*****    功能：判断一个数是否是立即数           *******
*****    作者：Hsuperan                         *******
*****    时间：2016.6.20                        *******
*******************************************************/

#include <stdio.h>

/******************************************************
*******      函数名：leftmove（）             *********
*******        功能：实现将输入的数循环左移   *********
*******    输入参数：data 要判断的立即数      *********
*******                 n 要左移的位数        *********
*******      返回值：循环左移n位后的立即数    *********
*******************************************************/
unsigned int leftmove(unsigned int data,int n)
{
    if(n<0 || n>15)
    {
      return 0xffffffff;
    }
    
    unsigned int tmp; //临时变量，存放左移后的立即数，作为返回值
    tmp = data << (2 * n);       
    data |= (data & (0xffffffff << (32 - 2 * n))) >> (32 - 2 * n);             
    return tmp;   
}

/******************************************************
*******      函数名：Judge（）                *********
*******        功能：判断立即数是否有效       *********
*******    输入参数：data 要判断的立即数      *********
*******      返回值：true,立即数有效          *********
*******              false,立即数无效   *********
*******************************************************/
int Judge(unsigned int data)
{
   int i;
   for(i=0;i<16;i++)
   {
     if(leftmove(data, i) <= 0x000000ff   )               
	 	  return 1; 
   }
   return 0;
}
int main(int argc, char const *argv[])
{      
	int num = 0;                      
	while(printf("请输入："), 1 == scanf("%d", &num))  //可自己定义输入数据的类型   
	{          
		if(Judge(num))          
		{                
		   printf("是合法立即数！\n");          
		}          
		else          
	       {    
		     printf("非法立即数！\n");          
		   }      
	}            
    return 0;  
} 
